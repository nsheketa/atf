{"version":3,"sources":["../../jquery.custom-select.js"],"names":["CustomSelect","$","defaults","block","hideCallback","includeValue","keyboard","modifier","placeholder","search","showCallback","transition","select","options","this","_$select","_options","_extends","_activeModifier","_dropupModifier","_keydown","bind","_dropup","_outside","_init","_proto","prototype","_this","_$element","hide","after","addClass","_$values","find","_values","each","i","option","el","text","trim","push","_$value","length","html","prop","_$dropdown","cssClass","eq","attr","$option","data","append","_$options","_search","one","event","_show","on","_select","_this2","preventDefault","window","slideDown","_$input","focus","_scroll","call","setTimeout","outsideClickEvent","document","documentElement","_hide","index","_this3","val","blur","show","_$wrap","scrollTop","slideUp","removeClass","off","_this4","top","position","center","outerHeight","_this5","choice","currentTarget","values","concat","splice","last","remove","not","$this","originalEvent","trigger","_this6","prepend","wrapAll","query","match","toLowerCase","indexOf","toggle","bottom","getBoundingClientRect","up","height","toggleClass","$target","target","parents","is","$visible","filter","keyCode","add","_jQueryPlugin","fn","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery';\r\n\r\n/*!\r\n * Custom Select jQuery Plugin\r\n */\r\n\r\nconst CustomSelect = (($) => {\r\n\r\n  const defaults = {\r\n    block: 'custom-select',\r\n    hideCallback: false,\r\n    includeValue: false,\r\n    keyboard: true,\r\n    modifier: false,\r\n    placeholder: false,\r\n    search: false,\r\n    showCallback: false,\r\n    transition: 0\r\n  };\r\n\r\n  class CustomSelect {\r\n\r\n    /**\r\n     * Custom Select\r\n     *\r\n     * @param {Element} select Original `<select>` DOM element to customize.\r\n     * @param {Object=} options Settings plain object to overwrite defaults.\r\n     * @param {string=} options.block Custom select BEM block name.\r\n     * @param {Function=} options.hideCallback Fires after dropdown closes.\r\n     * @param {boolean=} options.includeValue Adds chosen value option to\r\n     *     dropdown. If enabled also cancels dropdown options rerender.\r\n     * @param {boolean=} options.keyboard Enables keyboard control.\r\n     * @param {string=} options.modifier Custom select block BEM modifier.\r\n     * @param {string=} options.placeholder Placeholder hint, can be an HTML\r\n     *     string (appears only if there is no explicitly selected options).\r\n     * @param {boolean=} options.search Adds input to filter options.\r\n     * @param {Function=} options.showCallback Fires after dropdown opens.\r\n     * @param {(number|string)=} options.transition jQuery slideUp/Down param.\r\n     */\r\n    constructor(select, options) {\r\n      this._$select = $(select);\r\n      this._options = {\r\n        ...defaults,\r\n        ...typeof options === 'object' && options\r\n      };\r\n\r\n      // Modifiers\r\n      this._activeModifier = `${this._options.block}--active`;\r\n      this._dropupModifier = `${this._options.block}--dropup`;\r\n\r\n      // Event handlers that can be removed\r\n      this._keydown = this._keydown.bind(this);\r\n      this._dropup = this._dropup.bind(this);\r\n      this._outside = this._outside.bind(this);\r\n\r\n      this._init();\r\n    }\r\n\r\n    /**\r\n     * Renders initial state of custom select & sets\r\n     * options click event listeners.\r\n     *\r\n     * @private\r\n     */\r\n    _init() {\r\n      this._$element = $(\r\n        `<div class=\"${this._options.block}\">\r\n           <button class=\"${this._options.block}__option ${this._options.block}__option--value\" type=\"button\"></button>\r\n           <div class=\"${this._options.block}__dropdown\" style=\"display: none;\"></div>\r\n         </div>`\r\n      );\r\n\r\n      this._$select\r\n        .hide()\r\n        .after(this._$element);\r\n\r\n      if (this._options.modifier) {\r\n        this._$element.addClass(this._options.modifier);\r\n      }\r\n\r\n      this._$values = this._$select.find('option');\r\n      this._values = [];\r\n\r\n      $.each(this._$values, (i, option) => {\r\n        const el = $(option).text().trim();\r\n        this._values.push(el);\r\n      });\r\n\r\n      this._$value = this._$element.find(`.${this._options.block}__option--value`);\r\n\r\n      if (this._options.placeholder) {\r\n        // Check explicitly selected option\r\n        if (this._$select.find('[selected]').length) {\r\n          this._options.placeholder = false;\r\n        } else {\r\n          this._$value.html(this._options.placeholder);\r\n          // Set select value to null\r\n          this._$select.prop('selectedIndex', -1);\r\n        }\r\n      }\r\n\r\n      this._$dropdown = this._$element.find(`.${this._options.block}__dropdown`);\r\n\r\n      // Render options\r\n      $.each(this._values, (i, el) => {\r\n        const cssClass = this._$values.eq(i).attr('class');\r\n        const $option = $(\r\n          `<button class=\"${this._options.block}__option\" type=\"button\">${el}</button>`\r\n        );\r\n\r\n        if (el === this._$select.find(':selected').text().trim()) {\r\n          this._$value\r\n            .text(el)\r\n            .addClass(cssClass).data('class', cssClass);\r\n\r\n          if (this._options.includeValue || this._options.placeholder) {\r\n            $option.addClass(cssClass);\r\n            this._$dropdown.append($option);\r\n          }\r\n        } else {\r\n          $option.addClass(cssClass);\r\n          this._$dropdown.append($option);\r\n        }\r\n      });\r\n\r\n      this._$options = this._$dropdown.find(`.${this._options.block}__option`);\r\n\r\n      if (this._options.search) {\r\n        this._search();\r\n      }\r\n\r\n      this._$value.one('click', (event) => {\r\n        this._show(event);\r\n      });\r\n\r\n      if (!this._$options.length) {\r\n        this._$value.prop('disabled', true);\r\n      }\r\n\r\n      this._$options.on('click', (event) => {\r\n        this._select(event);\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Shows custom select dropdown & sets outside\r\n     * click listener to hide.\r\n     *\r\n     * @param {Object} event Value click jQuery event.\r\n     * @private\r\n     */\r\n    _show(event) {\r\n      event.preventDefault();\r\n\r\n      this._dropup();\r\n      $(window).on('resize scroll', this._dropup);\r\n\r\n      this._$element.addClass(this._activeModifier);\r\n\r\n      this._$dropdown.slideDown(this._options.transition, () => {\r\n        if (this._options.search) {\r\n          this._$input.focus();\r\n\r\n          if (this._options.includeValue) {\r\n            this._scroll();\r\n          }\r\n        }\r\n\r\n        // Open callback\r\n        if (typeof this._options.showCallback === 'function') {\r\n          this._options.showCallback.call(this._$element[0]);\r\n        }\r\n      });\r\n\r\n      setTimeout(() => {\r\n        const outsideClickEvent = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\r\n        $(window).on(outsideClickEvent, this._outside);\r\n      }, 0);\r\n\r\n      this._$value.one('click', (event) => {\r\n        event.preventDefault();\r\n\r\n        this._hide();\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._options.index = -1;\r\n        $(window).on('keydown', this._keydown);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Hides custom select dropdown & resets events\r\n     * listeners to initial.\r\n     *\r\n     * @private\r\n     */\r\n    _hide() {\r\n      if (this._options.search) {\r\n        this._$input.val('').blur();\r\n        this._$options.show();\r\n        this._$wrap.scrollTop(0);\r\n      }\r\n\r\n      this._$dropdown.slideUp(this._options.transition, () => {\r\n        this._$element\r\n          .removeClass(this._activeModifier)\r\n          .removeClass(this._dropupModifier);\r\n\r\n        // Close callback\r\n        if (typeof this._options.hideCallback === 'function') {\r\n          this._options.hideCallback.call(this._$element[0]);\r\n        }\r\n\r\n        $(window)\r\n          .off('touchstart click', this._outside)\r\n          .off('resize scroll', this._dropup);\r\n        this._$value\r\n          .off('click')\r\n          .one('click', (event) => {\r\n            this._show(event);\r\n          });\r\n      });\r\n\r\n      if (this._options.keyboard) {\r\n        this._$options.blur();\r\n        $(window).off('keydown', this._keydown);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Centers chosen option in scrollable element\r\n     * of dropdown.\r\n     *\r\n     * @private\r\n     */\r\n    _scroll() {\r\n      this._$options.each((i, option) => {\r\n        const $option = $(option);\r\n\r\n        if ($option.text() === this._$value.text()) {\r\n          const top = $option.position().top;\r\n          const height = this._$wrap.outerHeight();\r\n          const center = height / 2 - $option.outerHeight() / 2;\r\n\r\n          if (top > center) {\r\n            this._$wrap.scrollTop(top - center);\r\n          }\r\n\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Changes value of custom select & `<select>`\r\n     * by chosen option.\r\n     *\r\n     * @param {Object} event Option click jQuery event.\r\n     * @private\r\n     */\r\n    _select(event) {\r\n      event.preventDefault();\r\n\r\n      const choice = $(event.currentTarget).text().trim();\r\n      const values = [...this._values];\r\n\r\n      this._$value\r\n        .text(choice)\r\n        .removeClass(this._$value.data('class'));\r\n      this._$values.prop('selected', false);\r\n\r\n      $.each(values, (i, el) => {\r\n        if (!this._options.includeValue && el === choice) {\r\n          values.splice(i, 1);\r\n        }\r\n\r\n        $.each(this._$values, (i, option) => {\r\n          const $option = $(option);\r\n          if ($option.text().trim() === choice) {\r\n            const cssClass = $option.attr('class');\r\n\r\n            $option.prop('selected', true);\r\n            this._$value.addClass(cssClass).data('class', cssClass);\r\n          }\r\n        });\r\n      });\r\n\r\n      this._hide();\r\n\r\n      // Update dropdown options content\r\n      if (!this._options.includeValue) {\r\n        if (this._$options.length > values.length) {\r\n          const last = this._$options.eq(values.length);\r\n\r\n          last.remove();\r\n          this._$options = this._$options.not(last);\r\n\r\n          if (!this._$options.length) {\r\n            this._$value.prop('disabled', true);\r\n          }\r\n        }\r\n\r\n        $.each(this._$options, (i, option) => {\r\n          const $option = $(option);\r\n          $option.text(values[i]);\r\n\r\n          // Reset option class\r\n          $option.attr('class', `${this._options.block}__option`);\r\n\r\n          $.each(this._$values, function() {\r\n            const $this = $(this);\r\n            if ($this.text().trim() === values[i]) {\r\n              $option.addClass($this.attr('class'));\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      if (typeof event.originalEvent !== 'undefined') {\r\n        this._$select.trigger('change');\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Wraps options by wrap element, adds search\r\n     * input to dropdown.\r\n     *\r\n     * @private\r\n     */\r\n    _search() {\r\n      this._$input = $(`<input class=\"${this._options.block}__input\" autocomplete=\"off\">`);\r\n      this._$dropdown.prepend(this._$input);\r\n\r\n      // Add scrollable wrap\r\n      this._$options.wrapAll(`<div class=\"${this._options.block}__option-wrap\"></div>`);\r\n      this._$wrap = this._$element.find(`.${this._options.block}__option-wrap`);\r\n\r\n      this._$input.on('focus', () => {\r\n        this._options.index = -1;\r\n      });\r\n\r\n      this._$input.on('keyup', () => {\r\n        const query = this._$input.val().trim();\r\n\r\n        if (query.length) {\r\n          this._$wrap.scrollTop(0);\r\n\r\n          setTimeout(() => {\r\n            if (query === this._$input.val().trim()) {\r\n              $.each(this._$options, (i, option) => {\r\n                const $option = $(option);\r\n                const text = $option.text().trim().toLowerCase();\r\n                const match = text.indexOf(query.toLowerCase()) !== -1;\r\n\r\n                $option.toggle(match);\r\n              });\r\n            }\r\n          }, 300);\r\n        } else {\r\n          this._$options.show();\r\n        }\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Toggles custom select dropup modifier based\r\n     * on space for dropdown below.\r\n     *\r\n     * @private\r\n     */\r\n    _dropup() {\r\n      const bottom = this._$element[0].getBoundingClientRect().bottom;\r\n      const up = $(window).height() - bottom < this._$dropdown.height();\r\n\r\n      this._$element.toggleClass(this._dropupModifier, up);\r\n    }\r\n\r\n     /**\r\n     * Hides dropdown if target of event (e.g. click\r\n     * on `$window`) is not custom select.\r\n     *\r\n     * @param {Object} event Outside \"click\" jQuery event.\r\n     * @private\r\n     */\r\n    _outside(event) {\r\n      const $target = $(event.target);\r\n      if (!$target.parents().is(this._$element) && !$target.is(this._$element)) {\r\n        this._hide();\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Controls navigation from keyboard by custom\r\n     * select options.\r\n     *\r\n     * @param {Object} event Keydown jQuery event.\r\n     * @private\r\n     */\r\n    _keydown(event) {\r\n      const $visible = this._$options.filter(':visible');\r\n\r\n      switch (event.keyCode) {\r\n        // Down\r\n        case 40:\r\n          event.preventDefault();\r\n\r\n          const next = $visible.eq(this._options.index + 1).length;\r\n          if (next) {\r\n            this._options.index += 1;\r\n          } else {\r\n            this._options.index = 0;\r\n          }\r\n\r\n          $visible.eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Up\r\n        case 38:\r\n          event.preventDefault();\r\n\r\n          const prev = $visible.eq(this._options.index - 1).length;\r\n          if (prev && this._options.index - 1 >= 0) {\r\n            this._options.index -= 1;\r\n          } else {\r\n            this._options.index = $visible.length - 1;\r\n          }\r\n\r\n          $visible.eq(this._options.index).focus();\r\n          break;\r\n\r\n        // Enter\r\n        case 13:\r\n\r\n        // Space\r\n        case 32:\r\n          if (!this._$input || !this._$input.is(':focus')) {\r\n            event.preventDefault();\r\n\r\n            const $option = this._$options.add(this._$value).filter(':focus');\r\n            $option.trigger('click');\r\n\r\n            if (!$option.is(this._$value)) {\r\n              this._$select.trigger('change');\r\n            }\r\n            this._$value.focus();\r\n          }\r\n          break;\r\n\r\n        // Esc\r\n        case 27:\r\n          event.preventDefault();\r\n\r\n          this._hide();\r\n          this._$value.focus();\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Creates jQuery plugin function.\r\n     *\r\n     * @param {Object} [options] Settings object.\r\n     * @returns {Function} jQuery plugin.\r\n     * @private\r\n     */\r\n    static _jQueryPlugin(options) {\r\n      return this.each(function () {\r\n        const $this = $(this);\r\n        let data = $this.data('custom-select');\r\n\r\n        if (!data) {\r\n          data = new CustomSelect(this, options);\r\n          $this.data('custom-select', data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  $.fn['customSelect'] = CustomSelect._jQueryPlugin;\r\n  $.fn['customSelect'].noConflict = () => $.fn['customSelect'];\r\n\r\n  return CustomSelect;\r\n\r\n})($);\r\n\r\nexport default CustomSelect;\r\n"]}